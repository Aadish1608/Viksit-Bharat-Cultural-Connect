<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viksit Bharat Cultural Connect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background-color: #121212; 
            color: #ffffff; 
        }
        .hero { 
            background: linear-gradient(to right, #ff7e5f, #feb47b); 
            color: white; 
            padding: 100px 0; 
            text-align: center; 
        }
        .gallery img, .gallery video { 
            width: 100%; 
            height: 200px; 
            object-fit: cover; 
        }
        .map-container { 
            height: 400px; 
            background-color: #1e1e1e; 
            border-radius: 5px; 
            position: relative; 
        }
        #map { 
            height: 100%; 
            width: 100%; 
            position: relative; 
            z-index: 1; 
        }
        .upload-rules { 
            background: #2c2c2c; 
            padding: 20px; 
            border-radius: 5px; 
            margin-bottom: 20px; 
            color: #ffffff; 
        }
        .error { 
            color: #ff6b6b; 
        }
        footer { 
            background: #343a40; 
            color: white; 
            padding: 20px 0; 
            text-align: center; 
            margin-top: 50px; 
        }
        .card { 
            background-color: #2c2c2c; 
            color: #ffffff; 
        }
        .form-control, .form-select { 
            background-color: #1e1e1e; 
            color: #ffffff; 
            border: 1px solid #555; 
        }
        .form-control:focus, .form-select:focus { 
            background-color: #1e1e1e; 
            color: #ffffff; 
            border-color: #007bff; 
        }
        .btn-primary { 
            background-color: #007bff; 
            border-color: #007bff; 
        }
        .btn-primary:hover { 
            background-color: #0056b3; 
            border-color: #0056b3; 
        }
        .btn-light { 
            background-color: #f8f9fa; 
            color: #212529; 
        }
        .btn-outline-light { 
            color: #f8f9fa; 
            border-color: #f8f9fa; 
        }
        .btn-outline-light:hover { 
            background-color: #f8f9fa; 
            color: #212529; 
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#home">Viksit Bharat Cultural Connect</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#upload">Upload</a></li>
                    <li class="nav-item"><a class="nav-link" href="#explore">Explore</a></li>
                    <li class="nav-item"><a class="nav-link" href="#guidelines">Guidelines</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Homepage -->
    <section id="home" class="hero">
        <div class="container">
            <h1>Viksit Bharat Cultural Connect</h1>
            <p class="lead">Preserving culture, one story at a time.</p>
            <p>Celebrate and preserve India’s diverse culture by sharing photos and videos of our rich heritage.</p>
            <a href="#upload" class="btn btn-light btn-lg me-2">Upload Your Culture</a>
            <a href="#explore" class="btn btn-outline-light btn-lg">Explore Contributions</a>
        </div>
    </section>

    <!-- Upload Page -->
    <section id="upload" class="container my-5">
        <h2>Upload Your Culture</h2>
        <div class="upload-rules">
            <h5>Rules for Uploads:</h5>
            <ul>
                <li>No explicit, offensive, or harmful content.</li>
                <li>Only cultural, traditional, or heritage-related content is allowed.</li>
                <li>Videos must not exceed 15 minutes.</li>
            </ul>
        </div>
        <form id="uploadForm">
            <div class="mb-3">
                <label for="file" class="form-label">Upload Photo or Video (JPG, PNG, MP4)</label>
                <input type="file" class="form-control" id="file" accept=".jpg,.png,.mp4" required>
            </div>
            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input type="text" class="form-control" id="title" required>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description/Story (max 200 words)</label>
                <textarea class="form-control" id="description" rows="4" maxlength="200" required></textarea>
            </div>
            <div class="mb-3">
                <label for="uploader" class="form-label">Your Name (or Anonymous)</label>
                <input type="text" class="form-control" id="uploader" placeholder="Anonymous">
            </div>
            <div class="mb-3">
                <label for="location" class="form-label">Location/Region</label>
                <input type="text" class="form-control" id="location">
            </div>
            <div class="mb-3">
                <label for="category" class="form-label">Category (Region, Art Form, Festival)</label>
                <select class="form-select" id="category">
                    <option value="region">Region</option>
                    <option value="art-form">Art Form</option>
                    <option value="festival">Festival</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>
            <div id="errorMsg" class="error mt-3"></div>
        </form>
    </section>

    <!-- Explore Page -->
    <section id="explore" class="container my-5">
        <h2>Explore Contributions</h2>
        <div class="mb-3">
            <label for="filter" class="form-label">Filter by:</label>
            <select class="form-select" id="filter">
                <option value="all">All</option>
                <option value="region">Region</option>
                <option value="art-form">Art Form</option>
                <option value="festival">Festival</option>
            </select>
        </div>
        <div class="row gallery" id="gallery"></div>
        <div class="map-container mt-5">
            <h3>Interactive Map of India</h3>
            <div id="map"></div>
        </div>
    </section>

    <!-- Community Guidelines Page -->
    <section id="guidelines" class="container my-5">
        <h2>Community Guidelines</h2>
        <p>This is a safe space to celebrate India’s culture. We encourage everyone to share stories, photos, and videos that highlight our rich heritage. To keep this community respectful and enjoyable, please follow these guidelines:</p>
        <ul>
            <li>Keep content respectful, relevant, and focused on cultural, traditional, or heritage themes.</li>
            <li>Avoid explicit, offensive, or harmful material.</li>
            <li>Videos must be under 15 minutes to ensure quick sharing.</li>
            <li>Provide a short description with each upload to tell the story behind it.</li>
        </ul>
        <p>If you have questions, feel free to reach out. Let's preserve our culture together!</p>
    </section>

    <!-- Footer with Credits -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Viksit Bharat Cultural Connect. Made by Class 9th A, PM SHRI KV NSG MANESAR: Aadish Tiwari, Aryan Jha, Atharv Singh.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Simulate data storage
        let uploads = JSON.parse(localStorage.getItem('uploads')) || [];

        // Upload Form Handling
        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('file').files[0];
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const uploader = document.getElementById('uploader').value || 'Anonymous';
            const location = document.getElementById('location').value;
            const category = document.getElementById('category').value;
            const errorMsg = document.getElementById('errorMsg');

            errorMsg.textContent = '';

            // Validation
            if (!file) {
                errorMsg.textContent = 'Please select a file.';
                return;
            }
            if (!['image/jpeg', 'image/png', 'video/mp4'].includes(file.type)) {
                errorMsg.textContent = 'Only JPG, PNG, or MP4 files are allowed.';
                return;
            }
            if (file.type === 'video/mp4' && file.size > 100 * 1024 * 1024) { // Rough check for 15 min (approx 100MB)
                errorMsg.textContent = 'Video must not exceed 15 minutes.';
                return;
            }
            if (description.split(' ').length > 200) {
                errorMsg.textContent = 'Description must be under 200 words.';
                return;
            }

            // Save upload (simulate)
            const upload = { file: URL.createObjectURL(file), title, description, uploader, location, category };
            uploads.push(upload);
            localStorage.setItem('uploads', JSON.stringify(uploads));
            alert('Upload successful!');
            this.reset();
            renderGallery();
            updateMap();
        });

        // Render Gallery
        function renderGallery(filter = 'all') {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';
            uploads.filter(u => filter === 'all' || u.category === filter).forEach(u => {
                const col = document.createElement('div');
                col.className = 'col-md-4 mb-4';
                col.innerHTML = `
                    <div class="card">
                        ${u.file.includes('video') ? `<video controls><source src="${u.file}" type="video/mp4"></video>` : `<img src="${u.file}" alt="${u.title}">`}
                        <div class="card-body">
                            <h5>${u.title}</h5>
                            <p><strong>By:</strong> ${u.uploader}</p>
                            <p>${u.description}</p>
                            <p><strong>Location:</strong> ${u.location || 'N/A'}</p>
                        </div>
                    </div>
                `;
                gallery.appendChild(col);
            });
        }

        // Filter
        document.getElementById('filter').addEventListener('change', function() {
            renderGallery(this.value);
        });

        // Initialize Map
        let map;
        function initMap() {
            console.log('Initializing map...');
            map = L.map('map').setView([20.5937, 78.9629], 5); // Center on India
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 20
            }).addTo(map);
            console.log('Map initialized successfully.');
            updateMap();
        }

        // Function to update map with markers
        function updateMap() {
            if (!map) {
                console.log('Map not initialized yet.');
                return;
            }
            console.log('Updating map with', uploads.length, 'uploads');
            // Clear existing markers (simple way, in real app use marker groups)
            map.eachLayer(function(layer) {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            // Add pins for uploads with locations
            const locations = {
                'Maharashtra': [19.0760, 72.8777],
                'Kerala': [10.8505, 76.2711],
                'Delhi': [28.7041, 77.1025],
                'Rajasthan': [27.0238, 74.2179],
                'Tamil Nadu': [11.1271, 78.6569],
                'West Bengal': [22.9868, 87.8550],
                'Gujarat': [22.2587, 71.1924],
                'Karnataka': [15.3173, 75.7139],
                'Punjab': [31.1471, 75.3412],
                'Uttar Pradesh': [26.8467, 80.9462]
                // Add more locations as needed
            };
            uploads.forEach(u => {
                if (u.location && locations[u.location]) {
                    L.marker(locations[u.location]).addTo(map).bindPopup(`<b>${u.title}</b><br>By: ${u.uploader}<br>${u.description}`);
                }
            });
        }

        // Initialize map on page load
        window.addEventListener('load', initMap);

        // Initial render
        renderGallery();
    </script>
</body>
</html>
